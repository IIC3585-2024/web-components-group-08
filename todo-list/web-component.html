<template id="todo-list-template">
  <style>
    .todo-list {
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 5px;
      width: 200px;
    }
    .todo-item {
      display: flex;
      justify-content: space-between;
      margin: 5px 0;
    }
  </style>
  <div class="todo-list">
    <h3 class="title"></h3>
    <input type="text" class="input" />
    <button class="add">Add</button>
    <ul class="items"></ul>
  </div>
</template>

<script>
  class TodoList extends HTMLElement {
    constructor() {
      super();
      const template = document.getElementById("todo-list-template").content;
      const shadowRoot = this.attachShadow({ mode: "open" });
      shadowRoot.appendChild(template.cloneNode(true));
    }

    connectedCallback() {
      this.shadowRoot.querySelector(".title").textContent =
        this.getAttribute("title");
      const items = this.shadowRoot.querySelector(".items");
      for (let i = 1; i <= 3; i++) {
        const item = this.getAttribute(`item${i}`);
        if (item) {
          const li = document.createElement("li");
          li.className = "todo-item";
          li.textContent = item;
          const button = document.createElement("button");
          button.textContent = "-";
          button.onclick = () => li.remove();
          li.appendChild(button);
          items.appendChild(li);
        }
      }

      this.shadowRoot.querySelector(".add").onclick = () => {
        const input = this.shadowRoot.querySelector(".input");
        const li = document.createElement("li");
        li.className = "todo-item";
        li.textContent = input.value;
        const button = document.createElement("button");
        button.textContent = "-";
        button.onclick = () => li.remove();
        li.appendChild(button);
        items.appendChild(li);
        input.value = "";
      };
    }
  }

  customElements.define("todo-list", TodoList);
</script>
